#!/usr/bin/env php
<?php
use Application\Command\FourChanDash;

$app = require 'index.php';

$console = new Symfony\Component\Console\Application();

$console->add(new FourChanDash\BoardsSyncCommand($app));
$console->add(new FourChanDash\BoardsAddCommand($app));
$console->add(new FourChanDash\BoardsUpdateCommand($app));

$console->add(new FourChanDash\BoardsMigrateCommand($app));

$helpers = new \Symfony\Component\Console\Helper\HelperSet(array(
  'db' => new \Doctrine\DBAL\Tools\Console\Helper\ConnectionHelper(
    $app['db.orm.em']['FourChanDash']->getConnection()
  ),
  'em' => new \Doctrine\ORM\Tools\Console\Helper\EntityManagerHelper(
    $app['db.orm.em']['FourChanDash']
  ),
));
$console->setHelperSet($helpers);
Doctrine\ORM\Tools\Console\ConsoleRunner::addCommands($console);

$console->run();
